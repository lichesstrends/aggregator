services:
  dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    working_dir: /app
    volumes:
      - .:/app
      - cargo-registry:/usr/local/cargo/registry
      - cargo-git:/usr/local/cargo/git
      - target-cache:/app/target
    tty: true
    command: >
      bash -c "
        echo '🔁 cargo-watch running (debug build)...';
        cargo-watch -x 'run'
      "
      
volumes:
  cargo-registry:
  cargo-git:
  target-cache:
